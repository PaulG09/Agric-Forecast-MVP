<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Agri-Forecast Platform</title>
		<link rel="stylesheet" href="/static/style.css">
		<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
	</head>
	<body>
		<div class="container">
			<h1>Agri Forecast Platform</h1>
			<form id="forecast-form">
				<div class="form-group">
					<label for="crop">Select Crop:</label>
					<select id="crop" name="crop">
						{% for crop in crops %}
						<option value="{{ crop }}">{{ crop }}</option>
						{% endfor %}
					</select>
				</div>
				<div class="form-group">
					<label for="timeframe">Timeframe (in months):</label>
					<input type="number" id="timeframe" name="timeframe" min="1" max="12" required>

				</div>
				<button type="submit">Get Forecast</button>
			</form>

			
			<div id="chart"></div>
			
		</div>

		<script>
			document.getElementById('forecast-form').addEventListener('submit', function(e) {
							e.preventDefault();
							const crop = document.getElementById('crop').value;
							
							const timeframe = document.getElementById('timeframe').value;
							fetch('/api/forecast', {
											method: 'POST',
											headers: { 'Content-Type': 'application/json' },
											body: JSON.stringify({ crop: crop, timeframe: timeframe })
										})
								.then(response => response.json())
								.then(data => {
												const graph = JSON.parse(data.chart);
												Plotly.newPlot('chart', graph.data, graph.layout);
											});
											
						});
						
		</script>
	</body>
</html>
